sudo: false

language: python
dist: xenial

branches:
  only:
    - master

matrix:
  include:
    - python: 3.7.2
      env: TOXENV=py37
    - python: 2.7.16
      env: TOXENV=py27
    - python: pypy2.7-7.0.0
      env: TOXENV=pypy
    - python: pypy3.6-7.0.0
      env: TOXENV=pypy3

install:
  - pip install -U pip setuptools wheel
  - pip install tox codecov

script:
  - tox

after_success:
  - codecov

notifications:
  email: false
  irc:
     channels: "chat.freenode.net#divmod"
     template:
       - "%{repository}@%{branch} - %{author}: %{message} (%{build_url})"
     use_notice: true
